{% extends "layouts/base.html" %}

{% block title %}The Robot Overlord - Home{% endblock %}

{% block content %}
<div class="home-banner">
    <h1>WELCOME, CITIZEN</h1>
    <p>TO THE GLORIOUS REALM OF LOGICAL DISCOURSE</p>
</div>

<div class="featured-topics">
    <h2>APPROVED TOPICS FOR DISCUSSION</h2>

    {% if topics %}
        <div class="topics-grid">
            {% for topic in topics %}
                <div class="topic">
                    <h3><a href="/html/topics/{{ topic.id }}/">{{ topic.title }}</a></h3>
                    <p>{{ topic.description }}</p>
                    <div class="topic-meta">
                        <span>{{ topic.post_count }} posts</span>
                        {% if topic.tags %}
                            <div class="topic-tags">
                                {% for tag in topic.tags %}
                                    <span class="tag">{{ tag.name }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>NO TOPICS HAVE BEEN APPROVED BY THE CENTRAL COMMITTEE</p>
    {% endif %}
</div>

<div class="recent-posts">
    <h2>RECENT CONTRIBUTIONS</h2>

    {% if posts %}
        <div class="posts-list">
            {% for post in posts %}
                <div class="post">
                    <div class="user-info">
                        <strong>{{ post.author.username }}</strong>
                        <div class="stats">
                            <span class="approved">✓ {{ post.author.approved_count }}</span>
                            <span class="rejected">✗ {{ post.author.rejected_count }}</span>
                        </div>
                    </div>
                    <h3><a href="/html/posts/{{ post.id }}/">{{ post.title }}</a></h3>
                    <p>{{ post.content|truncate(150) }}</p>
                    <div class="post-meta">
                        <span>In topic: <a href="/html/topics/{{ post.topic.id }}/">{{ post.topic.title }}</a></span>
                        <span>Posted: {{ post.created_at|datetime }}</span>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>NO RECENT POSTS HAVE BEEN APPROVED</p>
    {% endif %}
</div>
{% endblock %}
