{% extends "layouts/base.html" %}

{% block title %}The Robot Overlord - Topics{% endblock %}

{% block content %}
<h1>APPROVED TOPICS FOR DISCUSSION</h1>

{% if topics %}
    <div class="topics-list">
        {% for topic in topics %}
            <div class="topic">
                <h2><a href="/html/topics/{{ topic.id }}/">{{ topic.title }}</a></h2>
                <p>{{ topic.description }}</p>
                <div class="topic-meta">
                    <span>{{ topic.post_count }} posts</span>
                    {% if topic.tags %}
                        <div class="topic-tags">
                            {% for tag in topic.tags %}
                                <span class="tag">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>

    {% if pagination %}
    <div class="pagination">
        {% if pagination.has_previous %}
            <a href="/html/topics/?page={{ pagination.previous_page }}">Previous</a>
        {% endif %}

        <span>Page {{ pagination.current_page }} of {{ pagination.total_pages }}</span>

        {% if pagination.has_next %}
            <a href="/html/topics/?page={{ pagination.next_page }}">Next</a>
        {% endif %}
    </div>
    {% endif %}
{% else %}
    <p>NO TOPICS HAVE BEEN APPROVED BY THE CENTRAL COMMITTEE</p>
{% endif %}

{% if user %}
<div class="create-topic">
    <h2>PROPOSE NEW TOPIC</h2>
    <form action="/html/topics/" method="post">
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required>
        </div>

        <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" name="description" rows="4" required></textarea>
        </div>

        <div class="form-group">
            <label for="tags">Tags (comma separated):</label>
            <input type="text" id="tags" name="tags">
        </div>

        <button type="submit">SUBMIT FOR APPROVAL</button>
    </form>
</div>
{% endif %}
{% endblock %}
